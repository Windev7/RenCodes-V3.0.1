<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RenCodes | Professional IDE</title>
    
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <script src="https://unpkg.com/blockly/javascript_compressed.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>

    <style>
        :root {
            --bg-deep: #050505;
            --panel-bg: #111111;
            --accent: #00f2ff;
            --blockly-main: #181818;
            --text-dim: #888;
        }

        body, html { 
            margin: 0; padding: 0; height: 100%; 
            background: var(--bg-deep); color: white;
            font-family: 'Inter', sans-serif; overflow: hidden;
        }

        /* Dashboard Layout */
        .app-shell {
            display: grid;
            grid-template-columns: 240px 1fr 400px;
            grid-template-rows: 60px 1fr;
            height: 100vh;
        }

        /* Top Navigation */
        header {
            grid-column: 1 / span 3;
            background: var(--panel-bg);
            border-bottom: 1px solid #222;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px;
        }

        /* Left Sidebar - Project Manager */
        .sidebar {
            background: var(--panel-bg);
            border-right: 1px solid #222;
            padding: 20px;
            display: flex; flex-direction: column; gap: 15px;
        }

        /* Workspace */
        #blocklyArea { background: var(--blockly-main); position: relative; }
        #blocklyDiv { position: absolute; inset: 0; }

        /* Stage Area (Right) */
        .stage-container {
            background: #000;
            border-left: 1px solid #222;
            display: flex; flex-direction: column;
        }

        .view-screen {
            flex: 1; position: relative;
            background: url('https://wallpaperaccess.com/full/39632.jpg') center/cover;
            margin: 20px; border-radius: 8px; overflow: hidden;
            box-shadow: 0 0 30px rgba(0,242,255,0.1);
        }

        #sprite {
            position: absolute; width: 80px;
            top: 50%; left: 50%; transform: translate(-50%, -50%);
            transition: all 0.1s linear; /* Smooth walking animation */
        }

        /* Terminal/Console */
        .terminal {
            height: 150px; background: #000;
            padding: 15px; font-family: monospace;
            border-top: 1px solid #222; color: var(--accent);
            font-size: 12px; overflow-y: auto;
        }

        /* Interaction Elements */
        .project-card {
            background: #1a1a1a; padding: 10px; border-radius: 6px;
            border: 1px solid #333; cursor: pointer;
        }
        
        .btn {
            background: var(--accent); color: black; border: none;
            padding: 8px 18px; border-radius: 4px; font-weight: bold;
            cursor: pointer; transition: 0.3s;
        }
        .btn:hover { filter: brightness(1.2); box-shadow: 0 0 15px var(--accent); }

        @media (max-width: 1000px) {
            .app-shell { grid-template-columns: 1fr; grid-template-rows: 60px 300px 1fr 150px; }
            .sidebar { display: none; }
        }
    </style>
</head>
<body>

<div class="app-shell">
    <header>
        <div style="font-weight: 900; letter-spacing: 2px;">REN<span style="color:var(--accent)">CODES</span> PRO</div>
        <div style="display: flex; gap: 10px;">
            <button class="btn" style="background: #333; color: white;" onclick="saveProject()">Save</button>
            <button class="btn" onclick="runInterpreter()">â–¶ Execute System</button>
        </div>
    </header>

    <aside class="sidebar">
        <div style="color: var(--text-dim); font-size: 12px; text-transform: uppercase;">Assets</div>
        <div class="project-card">Main_Sprite.png</div>
        <div class="project-card">Background_Space.jpg</div>
        <div class="project-card" onclick="playBeep()">Test_Sound.wav</div>
    </aside>

    <main id="blocklyArea">
        <div id="blocklyDiv"></div>
    </main>

    <section class="stage-container">
        <div class="view-screen">
            <img id="sprite" src="https://openclipart.org/download/216413/coniglio_rabbit.svg">
            <div id="bubble" style="position:absolute; background:white; color:black; padding:5px 10px; border-radius:10px; display:none;"></div>
        </div>
        <div class="terminal" id="terminal">
            [System Ready] Welcome, Emir Seyf. <br>
            > Waiting for block execution...
        </div>
    </section>
</div>

<xml id="toolbox" style="display: none">
    <category name="Motion" colour="#00f2ff">
        <block type="smooth_move"><value name="STEPS"><shadow type="math_number"><field name="NUM">10</field></shadow></value></block>
        <block type="rotate_instant"><value name="DEG"><shadow type="math_number"><field name="NUM">90</field></shadow></value></block>
        <block type="glide_to_random"></block>
    </category>
    <category name="Events" colour="#ffcc00">
        <block type="on_start"></block>
    </category>
    <category name="Looks" colour="#9966ff">
        <block type="say_bubble"><value name="TEXT"><shadow type="text"><field name="TEXT">RenCodes is live!</field></shadow></value></block>
        <block type="change_ghost_effect"></block>
    </category>
    <category name="Control" colour="#ffab19">
        <block type="wait_seconds"><value name="SEC"><shadow type="math_number"><field name
